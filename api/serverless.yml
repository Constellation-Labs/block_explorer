service: api

provider:
  name: aws
  runtime: nodejs12.x
  region: us-west-1
  environment:
    ELASTIC_SEARCH: 'http://localhost:9200'
    SLS_DEBUG: '*'

functions:
  snapshots:
    handler: handler.snapshots
    events:
      - http:
        path: snapshot/{term}
        method: GET
        parameters:
          paths:
            term: true
  checkpoint-blocks:
    handler: handler.checkpointBlocks
    events:
      - http:
        path: checkpoint-block/{term}
        method: GET
        parameters:
          paths:
            term: true
  transactions:
    handler: handler.transactions
    events:
      - http:
        path: transaction/{term}
        method: GET
        parameters:
          paths:
            term: true
  transactionsBySnapshot:
    handler: handler.transactionsBySnapshot
    events:
      - http:
        path: snapshot/{term}/transaction
        method: GET
        parameters:
          paths:
            term: true
  transactionsByAddress:
    handler: handler.transactionsByAddress
    events:
      - http:
        path: address/{term}/transaction
        method: GET
        parameters:
          paths:
            term: true
  transactionsBySender:
    handler: handler.transactionsBySender
    events:
      - http:
        path: address/{term}/transaction/sent
        method: GET
        parameters:
          paths:
            term: true
  transactionsByReceiver:
    handler: handler.transactionsByReceiver
    events:
      - http:
        path: address/{term}/transaction/received
        method: GET
        parameters:
          paths:
            term: true

plugins:
  - serverless-plugin-typescript